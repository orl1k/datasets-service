{% extends "layout.html" %}

{% block content %}
<div class="ui hidden divider"></div>

<h1 class="ui center aligned icon header ">
    <i class="file alternate outline icon"></i>
    <div class="content">
        DatasetsAPI
        <div class="sub header">Enter script arguments and run the script</div>
    </div>
</h1>

<div class="ui pointing secondary menu">
    <a class="item" data-tab="ds_arrays">Sentinel SAR</a>
    <a class="item" data-tab="weather_ds">Weather</a>
</div>

<div class="ui tab segment" data-tab="ds_arrays">
    <form class="ui form error">

        <h2 class="ui dividing header ">
            <i class="calendar outline icon"></i>
            <div class="content">
                Dataset date
            </div>
        </h2>

        <div class="ui form">
            <div class="field">
                <div class="ui calendar" id="dataset_calendar">
                    <div class="ui input left icon">
                        <i class="calendar icon"></i>
                        <input type="text" placeholder="Pick up a date" name="dataset_date" id="dataset_date">
                    </div>
                </div>
            </div>
        </div>

        <h2 class="ui dividing header">
            <i class="tasks icon"></i>
            <div class="content">
                Other
            </div>
        </h2>

        <div class="ui top attached three column center aligned divided grid segment">
            <div class="column">
                <div class="ui checkbox">
                    <input type="hidden" name="age" value="1"><input type="checkbox" checked="checked" id="age"
                        onclick="this.previousSibling.value=1-this.previousSibling.value">
                    <label for="age">age</label>
                </div>
            </div>
            <div class="column">
                <div class="ui checkbox">
                    <input type="hidden" name="concentrat" value="1"><input type="checkbox" checked="checked"
                        id="concentrat" onclick="this.previousSibling.value=1-this.previousSibling.value">
                    <label for="concentrat">concentrat</label>
                </div>
            </div>
            <div class="column">
                <div class="ui checkbox">
                    <input type="hidden" name="age_group" value="1"><input type="checkbox" checked="checked"
                        id="age_group" onclick="this.previousSibling.value=1-this.previousSibling.value">
                    <label for="age_group">age group</label>
                </div>
            </div>
        </div>

        <div class="ui top attached two column center aligned divided grid segment">
            <div class="column">
                <div class="ui checkbox">
                    <input type="hidden" name="advanced" value="1"><input type="checkbox" checked="checked"
                        id="advanced" onclick="this.previousSibling.value=1-this.previousSibling.value">
                    <label for="advanced">advanced</label>
                </div>
            </div>
            <div class="column">
                <div class="ui checkbox">
                    <input type="hidden" name="simple" value="1"><input type="checkbox" checked="checked" id="simple"
                        onclick="this.previousSibling.value=1-this.previousSibling.value">
                    <label for="simple">simple</label>
                </div>
            </div>
        </div>
        <h2 class="ui dividing header">
            <i class="exclamation icon"></i>
            <div class="content">
                Priority
            </div>
        </h2>

        <div class="ui hidden divider"></div>

        <div class="ui labeled slider" id="task_priority_slider"></div>
        <div class="ui input">
            <input id="task_priority" type="hidden" value="5" name="task_priority">
        </div>

        <div class="ui basic segment center aligned">
            <button class="ui huge animated button" type="submit" id="submit" tabindex="0">
                <div class="visible content">Start script</div>
                <div class="hidden content">
                    <i class="angle double right icon"></i>
                </div>
            </button>
            <a href="/flower" class="ui tiny image">
                <img src="/static/celery_icon.png">
            </a>
        </div>
    </form>
</div>

<div class="ui tab segment" data-tab="weather_ds">
    <form class="ui form error">

        <h2 class="ui dividing header ">
            <i class="calendar outline icon"></i>
            <div class="content">
                Dataset date
            </div>
        </h2>

        <div class="ui form">
            <div class="field">
                <div class="ui calendar" id="weather_dataset_calendar">
                    <div class="ui input left icon">
                        <i class="calendar icon"></i>
                        <input type="text" placeholder="Pick up a date" name="dataset_date" id="dataset_date">
                    </div>
                </div>
            </div>
        </div>

        <h2 class="ui dividing header">
            <i class="folder outline icon"></i>
            <div class="content">
                Paths
            </div>
        </h2>
        <div class="two fields">
            <div class="field">
                <label>Rasters</label>
                <input name="rasters_path" type="text" placeholder="Enter rasters path" value="/mnt/Gold2/rasters">
            </div>
            <div class="field">
                <label>Datasets</label>
                <input name="datasets_path" type="text" placeholder="Enter datasets path" value="/mnt/Gold1/datasets">
            </div>
        </div>

        <h2 class="ui dividing header">
            <i class="exclamation icon"></i>
            <div class="content">
                Priority
            </div>
        </h2>

        <div class="ui hidden divider"></div>

        <div class="ui labeled slider" id="task_priority_slider"></div>
        <div class="ui input">
            <input id="task_priority" type="hidden" value="5" name="task_priority">
        </div>

        <div class="ui basic segment center aligned">
            <button class="ui huge animated button" type="submit" id="weather_submit" tabindex="0">
                <div class="visible content">Start script</div>
                <div class="hidden content">
                    <i class="angle double right icon"></i>
                </div>
            </button>
            <a href="/flower" class="ui tiny image">
                <img src="/static/celery_icon.png">
            </a>
        </div>
    </form>
</div>



<table class="ui very basic collapsing celled table" id="task_table">
    <thead>
        <tr>
            <th class="center aligned">Name</th>
            <th class="center aligned">ID</th>
            <th class="center aligned">State</th>
            <th class="center aligned">Params</th>
        </tr>
    </thead>
    <tbody>
        {% for task in tasks %}
        <tr>
            {% set state = task.state %}
            <td class="center aligned">{{ task.name }}</td>
            <td class="center aligned">{{ task.id }}</td>
            <td class="center aligned  {{ state.state_class }}">
                <i class="icon {{ state.icon }}"></i> {{ state.name }}
            </td>
            <td class="center aligned">{{ task.kwargs }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- Refresh button -->
<!-- <button class="ui massive button" id='refresh-btn'>
    <i class="sync alternate icon"></i>
    Refresh
</button> -->

<div class="ui hidden divider"></div>

{% endblock %}

{% block scripts %}
{{ super() }}
{% endblock %}